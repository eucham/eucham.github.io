<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>分类: Kubernetes - 一条肥鱼</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="一条肥鱼"><meta name="msapplication-TileImage" content="/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="一条肥鱼"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="No. I&amp;#39;ll bring me back a souvenir."><meta property="og:type" content="website"><meta property="og:title" content="一条肥鱼"><meta property="og:url" content="https://feiyu.dev/"><meta property="og:site_name" content="一条肥鱼"><meta property="og:description" content="No. I&amp;#39;ll bring me back a souvenir."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://feiyu.dev/img/og_image.png"><meta property="article:author" content="一条肥鱼"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://feiyu.dev"},"headline":"一条肥鱼","image":["https://feiyu.dev/img/og_image.png"],"author":{"@type":"Person","name":"一条肥鱼"},"description":"No. I&#39;ll bring me back a souvenir."}</script><link rel="icon" href="/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?7d79380bb26079f6dd33da78e83cf2ab";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png" alt="一条肥鱼" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/categories/Golang">Golang</a><a class="navbar-item is-active" href="/categories/Kubernetes">Kubernetes</a><a class="navbar-item" href="/categories/Docker">Docker</a><a class="navbar-item" href="/about.html">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="To Find Me" href="https://github.com/feiyudev"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">分类</a></li><li class="is-active"><a href="#" aria-current="page">Kubernetes</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-06-12T07:04:28.491Z" title="2023-06-12T07:04:28.491Z">2023-06-12</time>发表</span><span class="level-item"><time dateTime="2023-06-12T07:04:28.491Z" title="2023-06-12T07:04:28.491Z">2023-06-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">4 分钟读完 (大约542个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/06/12/1c3fe39c1f3f.html">Certified Calico Operator: Level 1 笔记</a></h1><div class="content"><p>证书课程地址：<a target="_blank" rel="noopener" href="https://courses.academy.tigera.io/courses/course-v1:tigera+CCO-L1+CCO-L1-2020/course/">Course | CCO-L1 | Tigera</a><br>还有一份可能有用的电子书：<br><a target="_blank" rel="noopener" href="https://www.yuque.com/attachments/yuque/0/2022/pdf/34563650/1672383996979-dd110bd9-c119-4ead-b080-424ba48861c7.pdf">Tigera_eBook_Intro_to_Kubernetes_Networking.pdf</a></p>
<h3 id="Kubernetes-Network-Model"><a href="#Kubernetes-Network-Model" class="headerlink" title="Kubernetes Network Model"></a>Kubernetes Network Model</h3><ol>
<li>每个 Pod 都有一个 IP 地址；</li>
<li>同一个 Pod 中的容器共享同一 IP 地址，并能通过该地址相互通信；</li>
<li>Pod 与 Pod 之间可以通过 IP 通信（无需地址转换）；</li>
<li>网络隔离可以限制哪里 Pod 可以访问哪些不可以。</li>
</ol>
<p><img src="/images/pics/oNK9Sp.jpg"></p>
<h3 id="安装测试集群"><a href="#安装测试集群" class="headerlink" title="安装测试集群"></a>安装测试集群</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl https://raw.githubusercontent.com/tigera/ccol1/main/control-init.yaml | multipass launch -n control -m 2048M 20.04 --cloud-init -</span><br><span class="line">curl https://raw.githubusercontent.com/tigera/ccol1/main/node1-init.yaml | multipass launch -n node1 20.04 --cloud-init -</span><br><span class="line">curl https://raw.githubusercontent.com/tigera/ccol1/main/node2-init.yaml | multipass launch -n node2 20.04 --cloud-init -</span><br><span class="line">curl https://raw.githubusercontent.com/tigera/ccol1/main/host1-init.yaml | multipass launch -n host1 20.04 --cloud-init -</span><br></pre></td></tr></table></figure>
<p>重启系统后，可能需要启动所有的虚拟机</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">multipass start --all</span><br></pre></td></tr></table></figure>
<h3 id="安装-Calico"><a href="#安装-Calico" class="headerlink" title="安装 Calico"></a>安装 Calico</h3><p>4 种安装方式</p>
<ul>
<li>Manifest</li>
<li>Operator</li>
<li>Managed Kubernetes Services</li>
<li>Kubernetes Distros and Installers<h4 id="Operator-方式安装"><a href="#Operator-方式安装" class="headerlink" title="Operator 方式安装"></a>Operator 方式安装</h4>可参考：<a target="_blank" rel="noopener" href="https://projectcalico.docs.tigera.io/getting-started/kubernetes/quickstart">Quickstart for Calico on Kubernetes</a><br>注意事项：</li>
</ul>
<ol>
<li>Pod 的网段</li>
<li>calico 版本与 kubernetes 版本之间的兼容关系（最好就用教程里面的安装命令）<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f https://docs.projectcalico.org/archive/v3.21/manifests/tigera-operator.yaml</span><br><span class="line">cat &lt;&lt;<span class="string">EOF | kubectl apply -f -</span></span><br><span class="line"><span class="string">apiVersion: operator.tigera.io/v1</span></span><br><span class="line"><span class="string">kind: Installation</span></span><br><span class="line"><span class="string">metadata:</span></span><br><span class="line"><span class="string">  name: default</span></span><br><span class="line"><span class="string">spec:</span></span><br><span class="line"><span class="string">  calicoNetwork:</span></span><br><span class="line"><span class="string">    containerIPForwarding: Enabled</span></span><br><span class="line"><span class="string">    ipPools:</span></span><br><span class="line"><span class="string">    - cidr: 198.19.16.0/20</span></span><br><span class="line"><span class="string">      natOutgoing: Enabled</span></span><br><span class="line"><span class="string">      encapsulation: None</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>
删除 tigera-operator 命名空间<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">&quot;Content-Type: application/json&quot;</span> \</span><br><span class="line">-XPUT \</span><br><span class="line">-d <span class="string">&#x27;&#123;&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Namespace&quot;,&quot;metadata&quot;:&#123;&quot;name&quot;:&quot;tigera-operator&quot;&#125;,&quot;spec&quot;:&#123;&quot;finalizers&quot;:[]&#125;&#125;&#x27;</span> \</span><br><span class="line">http://localhost:8001/api/v1/namespaces/tigera-operator/finalize</span><br></pre></td></tr></table></figure>
相关 Pod 的工作内容：</li>
</ol>
<ul>
<li><code>tigera-operator/tigera-operator-xxxx-xxx</code> </li>
</ul>
<p>监听 Installation CR，并按照配置安装 calico CNI。</p>
<ul>
<li>calico-system/calico-node</li>
</ul>
<p>DaemonSet，网络策略实现；设置Node节点上的路由；为 IPIP、VXLAN、WireGuard 管理虚拟接口。</p>
<ul>
<li>calico-system/calico-typha</li>
</ul>
<p>StatefulSet，作为 calico-node 用来查询、监听 api-server 时的缓存层，避免直接访问 api-server。它由 tigera-operator 来随着 node 的变化，进行扩缩容。</p>
<ul>
<li>calico-system/calico-controller</li>
</ul>
<p>calico 的各种 controller 集合，用于自动同步资源状态。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-06-12T06:54:14.638Z" title="2023-06-12T06:54:14.638Z">2023-06-12</time>发表</span><span class="level-item"><time dateTime="2023-06-12T06:54:14.638Z" title="2023-06-12T06:54:14.638Z">2023-06-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">2 分钟读完 (大约272个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/06/12/6352c36d7c20.html">Service 中的几个 port 的区别</a></h1><div class="content"><p><strong>Service</strong>: This directs the traffic to a pod.<br><strong>TargetPort</strong>: This is the actual port on which your application is running inside the container.<br><strong>Port</strong>: Some times your application inside container serves different services on a different port.</p>
<p>Example: The actual application can run 8080 and health checks for this application can run on 8089 port of the container. So if you hit the service without port it doesn’t know to which port of the container it should redirect the request. Service needs to have a mapping so that it can hit the specific port of the container.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">MyApp</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">nodePort:</span> <span class="number">30475</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8089</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8080</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">metrics</span></span><br><span class="line">      <span class="attr">nodePort:</span> <span class="number">31261</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">5555</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">5555</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">health</span></span><br><span class="line">      <span class="attr">nodePort:</span> <span class="number">30013</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8443</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8085</span></span><br></pre></td></tr></table></figure>

<p>if you hit the my-service:8089 the traffic is routed to 8080 of the container(targetPort). Similarly, if you hit my-service:8443 then it is redirected to 8085 of the container(targetPort). But this myservice:8089 is internal to the kubernetes cluster and can be used when one application wants to communicate with another application. So to hit the service from outside the cluster someone needs to expose the port on the host machine on which kubernetes is running so that the traffic is redirected to a port of the container. This is node port(port exposed on the host machine). From the above example, you can hit the service from outside the cluster(Postman or any rest-client) by host_ip:nodePort</p>
<p>Say your host machine ip is 10.10.20.20 you can hit the http, metrics, health services by 10.10.20.20:30475, 10.10.20.20:31261, 10.10.20.20:30013.</p>
<p>Edits: Edited as per Raedwald comment.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-06-12T06:45:41.482Z" title="2023-06-12T06:45:41.482Z">2023-06-12</time>发表</span><span class="level-item"><time dateTime="2023-06-12T06:45:41.482Z" title="2023-06-12T06:45:41.482Z">2023-06-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">5 分钟读完 (大约765个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/06/12/51cba5e1e272.html">手动安装K8s记录</a></h1><div class="content"><h2 id="必要的工具安装"><a href="#必要的工具安装" class="headerlink" title="必要的工具安装"></a>必要的工具安装</h2><ul>
<li><p>cfssl</p>
</li>
<li><p>cfssljson</p>
</li>
<li><p>kubectl</p>
<h2 id="证书与CA"><a href="#证书与CA" class="headerlink" title="证书与CA"></a>证书与CA</h2><p><img src="/images/pics/gOW9YM.jpeg"></p>
<h2 id="配置和生成kubeconfig"><a href="#配置和生成kubeconfig" class="headerlink" title="配置和生成kubeconfig"></a>配置和生成kubeconfig</h2></li>
<li><p>kubelet 配置文件</p>
</li>
</ul>
<p>worker-n.kubeconfig，分发到所有 <strong>worker</strong> 节点上。</p>
<ul>
<li>kube-proxy 配置文件</li>
</ul>
<p>kube-proxy.kubeconfig，分发到所有 <strong>worker</strong> 节点上。</p>
<ul>
<li>kube-controller-manager 配置文件</li>
</ul>
<p>kube-controller-manager.kubeconfig，分发到所有 <strong>控制节点</strong> 上。</p>
<ul>
<li>kube-scheduler 配置文件</li>
</ul>
<p>kube-scheduler.kubeconfig，分发到所有 <strong>控制节点</strong> 上。</p>
<ul>
<li>Admin 配置文件</li>
</ul>
<p>admin.kubeconfig，分发到所有 <strong>控制节点</strong> 上。</p>
<h2 id="配置加密k8s-secrets的秘钥"><a href="#配置加密k8s-secrets的秘钥" class="headerlink" title="配置加密k8s secrets的秘钥"></a>配置加密k8s secrets的秘钥</h2><p>encryption-config.yaml，分发到所有 <strong>控制节点</strong> 上。</p>
<h2 id="配置-amp-部署etcd"><a href="#配置-amp-部署etcd" class="headerlink" title="配置&amp;部署etcd"></a>配置&amp;部署etcd</h2><p>前置要求：etcd &amp; etcdctl 二进制<br>将 <code>ca.pem</code>、<code>kubernetes-key.pem</code>、<code>kubernetes.pem</code> 拷贝到 etcd 所在节点上，其中 <code>kubernetes-key.pem</code>、<code>kubernetes.pem</code> 作为 etcd https 服务的 TLS 证书。</p>
<h2 id="配置-amp-部署控制节点服务"><a href="#配置-amp-部署控制节点服务" class="headerlink" title="配置&amp;部署控制节点服务"></a>配置&amp;部署控制节点服务</h2><p>前置要求：kube-apiserver &amp; kube-controller-manager &amp; kube-scheduler &amp; kubectl 二进制</p>
<h3 id="api-server"><a href="#api-server" class="headerlink" title="api-server"></a>api-server</h3><p>在其启动参数中，需要</p>
<ol>
<li><p>指定 CA 为 <code>ca.pem</code></p>
</li>
<li><p>指定 etcd 的 CA 证书 <code>ca.pem</code>，公私钥为 <code>kubernetes-key.pem</code>、<code>kubernetes.pem</code>、及 etcd 的访问地址</p>
</li>
<li><p>指定 k8s secrets 的秘钥为 <code>encryption-config.yaml</code></p>
</li>
<li><p>指定 kubelet 的 CA 证书 <code>ca.pem</code>，公私钥为 <code>kubernetes-key.pem</code>、<code>kubernetes.pem</code></p>
</li>
<li><p>指定 api-server https 服务所用的 TLS 证书为 <code>kubernetes-key.pem</code>、<code>kubernetes.pem</code></p>
</li>
<li><p>指定 service account 的证书为 <code>service-account.pem</code></p>
<h3 id="controller-manager"><a href="#controller-manager" class="headerlink" title="controller-manager"></a>controller-manager</h3><p>在其启动参数中，需要</p>
</li>
<li><p>指定 cluster 所使用的 CA 的公私钥为 <code>ca.pem</code>、<code>ca-key.pem</code></p>
</li>
<li><p>指定 kubeconfig 使用 kube-controller-manager.kubeconfig</p>
</li>
<li><p>指定 root CA 为 <code>ca.pem</code></p>
</li>
<li><p>指定 service account 的私钥为 <code>service-account-key.pem</code></p>
<h3 id="scheduler"><a href="#scheduler" class="headerlink" title="scheduler"></a>scheduler</h3><p>在启动参数中，指定配置文件 <code>kube-scheduler.yaml</code>，然后在 <code>kube-scheduler.yaml</code> 中指定 kubeconfig 为 <code>kube-scheduler.kubeconfig</code>。</p>
</li>
</ol>
<hr>
<p>启动控制面服务 &amp; 验证</p>
<h2 id="给-kubelet-添加数据处理权限"><a href="#给-kubelet-添加数据处理权限" class="headerlink" title="给 kubelet 添加数据处理权限"></a>给 kubelet 添加数据处理权限</h2><p>创建 <code>system:kube-apiserver-to-kubelet</code> <a target="_blank" rel="noopener" href="https://kubernetes.io/docs/admin/authorization/rbac/#role-and-clusterrole">ClusterRole</a> 及 <code>system:kube-apiserver</code> ClusterRoleBinding 以允许请求 Kubelet API 和执行大部分来管理 Pods 的任务</p>
<h2 id="配置-amp-部署worker节点"><a href="#配置-amp-部署worker节点" class="headerlink" title="配置&amp;部署worker节点"></a>配置&amp;部署worker节点</h2><ol>
<li><p>安装 OS 依赖的组件：socat conntrack ipset</p>
</li>
<li><p>安装 CRI</p>
</li>
<li><p>安装 worker 节点所需的二进制：<code>kubectl</code>、<code>kube-proxy</code>、<code>kubelet</code>、<code>默认提供的 CNI plugins</code></p>
<h3 id="配置kubelet"><a href="#配置kubelet" class="headerlink" title="配置kubelet"></a>配置kubelet</h3><p>创建 <code>kubelet-config.yaml</code> 文件，在该文件中指定</p>
</li>
<li><p>CA 证书</p>
</li>
<li><p>TLS 公私钥分别使用 <code>worker-1.pem</code>、<code>worker-1-key.pem</code>。好家伙，kubelet 又是一个 https 服务。</p>
</li>
</ol>
<p>并在 <code>kubelet.service</code> 指定</p>
<ol>
<li>配置文件使用文件</li>
<li>指定 kubelet 所使用的 kubeconfig 为 worker-n.kubeconfig<h3 id="配置kube-proxy"><a href="#配置kube-proxy" class="headerlink" title="配置kube-proxy"></a>配置kube-proxy</h3>创建 <code>kube-proxy-config.yaml</code> 文件，在该文件中指定所用的 kubeconfig 为 <code>kube-proxy.kubeconfig</code>；再在 <code>kubelet.service</code> 指定使用此配置文件。</li>
</ol>
<hr>
<p>启动控制面服务</p>
<h2 id="配置-kubectl-所使用的-kubeconfig"><a href="#配置-kubectl-所使用的-kubeconfig" class="headerlink" title="配置 kubectl 所使用的 kubeconfig"></a>配置 kubectl 所使用的 kubeconfig</h2><p>使用 admin.pem 和 admin-key.pem 生成 kubeconfig。</p>
<h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl get componentstatuses</span><br><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure>
<h2 id="安装其他重要的组件"><a href="#安装其他重要的组件" class="headerlink" title="安装其他重要的组件"></a>安装其他重要的组件</h2><ol>
<li><p>安装 CNI</p>
</li>
<li><p>DNS</p>
</li>
<li><p>验证</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl run busybox --image=busybox:1.28.3 --<span class="built_in">command</span> -- sleep 3600</span><br><span class="line">kubectl get pods -l run=busybox</span><br><span class="line">kubectl <span class="built_in">exec</span> -ti <span class="variable">$POD_NAME</span> -- nslookup kubernetes</span><br></pre></td></tr></table></figure>
<h2 id="烟雾测试"><a href="#烟雾测试" class="headerlink" title="烟雾测试"></a>烟雾测试</h2></li>
<li><p>数据加密</p>
</li>
<li><p>Deployment</p>
<ol>
<li>创建</li>
<li>端口转发</li>
<li>容器日志</li>
<li>在容器中执行命令</li>
</ol>
</li>
<li><p>Service</p>
<ol>
<li>创建</li>
<li>访问</li>
</ol>
</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-06-12T06:41:33.669Z" title="2023-06-12T06:41:33.669Z">2023-06-12</time>发表</span><span class="level-item"><time dateTime="2023-06-12T06:41:33.669Z" title="2023-06-12T06:41:33.669Z">2023-06-12</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">5 分钟读完 (大约804个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/06/12/e1999bb16b6a.html">PV、PVC、StorageClass 概览</a></h1><div class="content"><h2 id="为何如此设计"><a href="#为何如此设计" class="headerlink" title="为何如此设计"></a>为何如此设计</h2><ol>
<li><p>解耦对存储的使用与维护</p>
</li>
<li><p>拓展不同的存储需求</p>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>PV 描述的是持久化存储数据卷。这个 API 对象主要定义的是⼀个持久化存储在宿主机上的⽬录，⽐如⼀个 NFS 的挂载⽬录。通常情况下，PV 对象是由运维⼈员事先创建在 Kubernetes 集群⾥待⽤的。_<strong>类似于接口的具体实现，干活的打工人</strong><em>。<br>PVC 描述的是 Pod 所希望使⽤的持久化存储的属性。PVC 对象通常由开发⼈员创建；或者以 PVC 模板的⽅式成为 StatefulSet 的⼀部分，然后由 StatefulSet 控制器负责创建带编号的 PVC。</em><strong>类似于接口，不提供具体实现</strong>_。</p>
<h2 id="PV与PVC匹配绑定"><a href="#PV与PVC匹配绑定" class="headerlink" title="PV与PVC匹配绑定"></a>PV与PVC匹配绑定</h2><h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3></li>
<li><p>两者的 spec 字段匹配</p>
</li>
<li><p>两者的 storageClassName 字段必须相同</p>
<h3 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h3><p>通过<a target="_blank" rel="noopener" href="https://github.com/kubernetes/kubernetes/blob/master/pkg/controller/volume/persistentvolume/pv_controller.go"> operator 机制</a>，为每个未处于 Bound 状态的 PVC，遍历所有可用的 PV，来匹配到合适的 PV。</p>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p>在 PVC 的 spec.volumeName 字段上填写上 PV 的名称</p>
<h2 id="两阶段处理"><a href="#两阶段处理" class="headerlink" title="两阶段处理"></a>两阶段处理</h2></li>
<li><p>Attach 调用存储系统的 API 将存储挂载到 Pod 将要调度到的 Node 上；</p>
</li>
</ol>
<p>由 AttachDetachController 管理。它不断地检查每⼀个 Pod 对应的 PV，和 这个 Pod 所在宿主机之间挂载情况。从⽽决定，是否需要对这个 PV 进⾏ Attach（或者 Dettach）操作。<br>作为⼀个 Kubernetes 内置的控制器，Volume Controller ⾃然是 kube-controller-manager 的⼀部分。所以，AttachDetachController 也⼀定是<strong>运⾏在 Master 节点上</strong>的。当然，Attach 操作只需要调⽤公有云或者具体存储项⽬的 API，并不需要在具体的宿主机上执⾏操作。</p>
<ol start="2">
<li>Mount<ol>
<li>格式化存储设备</li>
<li>绑定挂载到 Pod 中</li>
</ol>
</li>
</ol>
<p>由 VolumeManagerReconciler 管理。它必须发⽣在 Pod 对应的宿主机上，所以必须是 kubelet 组件的⼀部分。它运⾏起来之后，是⼀个独⽴于 kubelet 主循环的 Goroutine（不堵塞 kubelet 主控循环）。</p>
<h2 id="PV-管理方式"><a href="#PV-管理方式" class="headerlink" title="PV 管理方式"></a>PV 管理方式</h2><ul>
<li>Static Provisioning</li>
</ul>
<p>创建 PVC 之后，由运维人员手动创建 PV 的方式</p>
<ul>
<li>Dynamic Provisioning</li>
</ul>
<p>创建 PVC 时指定 StorageClass，由 StorageClass 中指定的 provisioner 来创建对应的 PV。</p>
<h2 id="StorageClass"><a href="#StorageClass" class="headerlink" title="StorageClass"></a>StorageClass</h2><p>当 PVC 中指定的 StorageClass 存在时，调用对应的 provisioner 来创建 PV；否则去匹配带有相同 StorageClass 的 PV。<br>如果 PVC 中未指定 StorageClass，当集群已经开启了名叫 DefaultStorageClass 的 Admission Plugin时，它就会为 PVC 和 PV ⾃动添加⼀个默认的 StorageClass；否则，PVC 的 storageClassName 的值就是“”，这也意味着它只能够跟 storageClassName 也是“”的 PV 进⾏绑定。</p>
<h2 id="本地持久化卷的实现"><a href="#本地持久化卷的实现" class="headerlink" title="本地持久化卷的实现"></a>本地持久化卷的实现</h2><p>延迟绑定：当使用本地存储后，需要延迟 PV 与 PVC 之间的绑定时机到 Pod 调度时，避免出现 PV 与 Pod 不在同一节点上面的问题。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">StorageClass</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">storage.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">	<span class="attr">name:</span> <span class="string">local-storage</span></span><br><span class="line"><span class="attr">provisioner:</span> <span class="string">kubernetes.io/no-provisioner</span></span><br><span class="line"><span class="attr">volumeBindingMode:</span> <span class="string">WaitForFirstConsumer</span></span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-02-27T12:49:01.934Z" title="2023-02-27T12:49:01.934Z">2023-02-27</time>发表</span><span class="level-item"><time dateTime="2023-02-27T15:38:50.853Z" title="2023-02-27T15:38:50.853Z">2023-02-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">10 分钟读完 (大约1462个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/02/27/acd4740af8a6.html">解决自研CSI启动后无法使用且CSINode无驱动信息的问题</a></h1><div class="content">环境信息此处对一些信息做了模糊处理，不想因此导致一些信息泄露。A环境：跑在kata容器中的 OS；B环境：跑在虚拟机中的Ubuntu系统；X CSI：开发中的 CSI，目标是跑在 A 环境的 Kubernetes 中。问题描述当 X CSI 的服务在 A 环境中启动后，在宿主机的 /var/lib/</div><a class="article-more button is-small is-size-7" href="/2023/02/27/acd4740af8a6.html#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-01-07T15:21:42.560Z" title="2023-01-07T15:21:42.560Z">2023-01-07</time>发表</span><span class="level-item"><time dateTime="2023-01-07T15:21:42.560Z" title="2023-01-07T15:21:42.560Z">2023-01-07</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">几秒读完 (大约9个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/07/b7e46d224c2f.html">Kubernetes如何创建一个Pod</a></h1><div class="content"><p><img src="/images/pics/how-k8s-create-a-pod.svg"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-01-05T16:52:03.085Z" title="2023-01-05T16:52:03.085Z">2023-01-06</time>发表</span><span class="level-item"><time dateTime="2023-01-05T16:53:36.767Z" title="2023-01-05T16:53:36.767Z">2023-01-06</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Docker/">Docker</a><span> / </span><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">10 分钟读完 (大约1476个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/06/f1a244286fc0.html">基于containerd CRI如何查看容器的文件内容？</a></h1><div class="content">CRI：containerd安装 crictl：https://github.com/kubernetes-sigs/cri-tools/releasesexec进入容器中查看使用 crictl crictl exec -it &lt;container-id&gt; &lt;shell-in-co</div><a class="article-more button is-small is-size-7" href="/2023/01/06/f1a244286fc0.html#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-10-09T16:22:13.594Z" title="2022-10-09T16:22:13.594Z">2022-10-10</time>发表</span><span class="level-item"><time dateTime="2022-10-09T16:25:54.090Z" title="2022-10-09T16:25:54.090Z">2022-10-10</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">14 分钟读完 (大约2114个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/10/10/673ef43cdb68.html">深入理解Kubernetes中Service的实现</a></h1><div class="content">iptables 是 Kubernetes 中 Service 的默认实现，了解 iptables 是理解 Service 工作原理不可缺少的一步。iptables 的构成在对包处理的过程中，内核添加了对包自定义处理的操作，这些自定义操作以链的形式存在，而链由表组成；每条链由不同的表组成，每个表由若</div><a class="article-more button is-small is-size-7" href="/2022/10/10/673ef43cdb68.html#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-08-29T15:51:03.018Z" title="2022-08-29T15:51:03.018Z">2022-08-29</time>发表</span><span class="level-item"><time dateTime="2022-08-29T15:56:00.025Z" title="2022-08-29T15:56:00.025Z">2022-08-29</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">6 分钟读完 (大约860个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/08/29/abbcdaf10c8c.html">听说过 OCI Runtime 不止 runc 还有 kata</a></h1><div class="content">OS：Ubuntu 22.04安装与配置通过 snap 安装 kata-containers，目前【2022-08-25】snap 中最新版本是 2.4.2 2022-06-08，但是官网的 release 已经发布到了 2.5.0。sudo snap install kata-containers</div><a class="article-more button is-small is-size-7" href="/2022/08/29/abbcdaf10c8c.html#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-08-05T14:36:05.287Z" title="2022-08-05T14:36:05.287Z">2022-08-05</time>发表</span><span class="level-item"><time dateTime="2022-08-05T15:27:00.625Z" title="2022-08-05T15:27:00.625Z">2022-08-05</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Kubernetes/">Kubernetes</a></span><span class="level-item">7 分钟读完 (大约1011个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/08/05/4cc0e7190731.html">3 分钟带你搞定 Kubernetes CNI 插件开发</a></h1><div class="content">本文介绍 CNI 插件调用的时机、CNI 插件配置的读取，以及 CNI 插件的调用、执行。读完此文，您将清楚 CNI 插件的运行机制、调用细节，并能够自信地写出一个简单的 CNI 插件。CRI：containerdCNI plugin：flannelCNI 的调用时机源码位置：containerd </div><a class="article-more button is-small is-size-7" href="/2022/08/05/4cc0e7190731.html#more">阅读更多</a></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/categories/Kubernetes/page/0/">上一页</a></div><div class="pagination-next"><a href="/categories/Kubernetes/page/2/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/categories/Kubernetes/">1</a></li><li><a class="pagination-link" href="/categories/Kubernetes/page/2/">2</a></li><li><a class="pagination-link" href="/categories/Kubernetes/page/3/">3</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">二月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/01/"><span class="level-start"><span class="level-item">一月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">六月 2023</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">二月 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">一月 2023</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">十月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">八月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">七月 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">六月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">五月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">四月 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">三月 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">十月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">十月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">一月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">七月 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">六月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">四月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">三月 2019</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/02/"><span class="level-start"><span class="level-item">二月 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">一月 2019</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/12/"><span class="level-start"><span class="level-item">十二月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">十一月 2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/09/"><span class="level-start"><span class="level-item">九月 2018</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">八月 2018</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">七月 2018</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">六月 2018</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">五月 2018</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">四月 2018</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">三月 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">二月 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">一月 2018</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">十二月 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/10/"><span class="level-start"><span class="level-item">十月 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">九月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/03/"><span class="level-start"><span class="level-item">三月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/01/"><span class="level-start"><span class="level-item">一月 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">十二月 2016</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-21T02:20:08.000Z">2024-02-21</time></p><p class="title"><a href="/2024/02/21/84ee50d29e8e.html">Google Pixel 7a玩机攻略</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-30T06:39:01.000Z">2024-01-30</time></p><p class="title"><a href="/2024/01/30/64634917304d.html">2024年CKS考试准备</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/06/26/dee71ca0ecee.html"><img src="/images/pics/wkhGYG.jpg" alt="利用OpenWrt为虚拟机做流量代理"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-06-26T02:55:51.382Z">2023-06-26</time></p><p class="title"><a href="/2023/06/26/dee71ca0ecee.html">利用OpenWrt为虚拟机做流量代理</a></p><p class="categories"><a href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/06/12/916fff7d458d.html"><img src="/images/pics/b00a1e01142bcaeee115eaab5848ce85.jpg" alt="Git 操作及原理"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-06-12T07:12:22.446Z">2023-06-12</time></p><p class="title"><a href="/2023/06/12/916fff7d458d.html">Git 操作及原理</a></p><p class="categories"><a href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2023/06/12/e54d04dcd0b8.html"><img src="/images/pics/Sd0C2u.jpg" alt="换行符问题"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-06-12T07:08:08.170Z">2023-06-12</time></p><p class="title"><a href="/2023/06/12/e54d04dcd0b8.html">换行符问题</a></p><p class="categories"><a href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></p></div></article></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://crisfang.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Cris</span></span><span class="level-right"><span class="level-item tag">crisfang.com</span></span></a></li><li><a class="level is-mobile" href="https://sanyuesha.com" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">三月沙</span></span><span class="level-right"><span class="level-item tag">sanyuesha.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/pics/d261cdb6203e0da42ae1324dd3aae11f.png" alt="一条肥鱼" height="28"></a><p class="is-size-7"><span>&copy; 2024 一条肥鱼</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="To Find Me" href="https://github.com/feiyudev"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>